let c="";document.addEventListener("mouseup",()=>{const n=window.getSelection();n&&n.toString().trim().length>0&&(c=n.toString().trim(),chrome.runtime.sendMessage({type:"TEXT_SELECTED",payload:{text:c,sourceUrl:window.location.href}}))});chrome.runtime.onMessage.addListener(n=>{if(n.type==="FILL_REPLY_FIELD"){const{text:e}=n.payload;a(e)}return!0});function a(n){let e=null;if(window.location.hostname.includes("twitter.com")||window.location.hostname.includes("x.com")){const t=document.activeElement;if(t&&(t.tagName==="TEXTAREA"||t.tagName==="INPUT"&&t.type==="text"))e=t;else{const i=document.querySelectorAll('div[contenteditable="true"], textarea');for(let o=0;o<i.length;o++){const l=i[o],s=l;if(s.offsetHeight>0&&s.offsetWidth>0){e=l;break}}}}if(e){if(e.tagName==="TEXTAREA"||e.tagName==="INPUT"){const t=e;t.value=n;const i=new Event("input",{bubbles:!0});t.dispatchEvent(i)}else if(e instanceof HTMLElement){e.innerHTML="",e.textContent=n;const t=new Event("input",{bubbles:!0});e.dispatchEvent(t)}}}
